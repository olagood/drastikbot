<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Drastikbot :: Quick Guide</title>
    <link type="text/css" rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div id="logo"></div>
    <div id="menu">
      <ul>
        <li> [ </li>
	    <li><a href="index.html">drastikbot</a></li>
        <li> ] </li>
        <li> [ </li>
	    <li><a href="quickguide.html">Quick Guide</a></li>
        <li> ] </li>
        <li> [ </li>
	    <li><a href="modules.html">Module Documentation</a></li>
        <li> ] </li>
        <li> [ </li>
	    <li><a href="https://github.com/olagood/drastikbot">GitHub</a></li>
	    <li> ] </li>
	    <li><a href="http://drastik.org">drastik.org</a></li>
      </ul>
    </div>
    <div id="newsbox">
      <ul>
	<li>
	  <h2>Installation</h2>
        </li>
      </ul>
      <ul>
        <li>
          <a href="#requirements">Requirements</a> |
          <a href="#download">Download</a> |
          <a href="#configuration">Configuration</a> |
          <a href="#install_modules"> Installing Modules</a> |
          <a href="#run">Running</a> |
          <a href="#update">Updating</a></li>
      </ul>
    </div>
    <div id="newsbox">
      <ul>

        
        <li id="requirements">
          <h3>Requirements</h3>
          <ul style="text-align: left; display: inline-block;
                     vertical-align: top;">
            <li><b>To install drastikbot you need:</b></li>
            <li class="fe_ls">Python 3.6 (or later)</li>
            <li class="fe_ls">Linux or a unix-like OS. (Windows support is
              untested.)</li>
          </ul>
          <ul style="text-align: left; display: inline-block;
                     vertical-align: top;">
            <li><b>If you use the default modules you will also need:</b></li>
            <li class="fe_ls">
              <a href="http://docs.python-requests.org/en/master/">Requests</a>
              : pip3 install requests</li>
            <li class="fe_ls">
              <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">
                Beautifulsoup4</a> : pip3 install beautifulsoup4</li>
            <p>Each module's dependencies are listed at the top of it's source
              code file.</p>
        </li>

        <li id="download">
          <h3>Download</h3>
          <p>You can download drastikbot at the following link:
            <a href="https://github.com/olagood/drastikbot/archive/master.zip">
              https://github.com/olagood/drastikbot/archive/master.zip</a>
          </p>
          <p>You may also clone the repository with:</p>
          <div class="code"><pre><code>
$ git clone https://github.com/olagood/drastikbot.git
          </code></pre></div>
        </li>


        <li id="configuration">
          <h3>Configuration</h3>
          <p>Drastikbot loads its settings and its modules from a configuration
            directory. If this directory does not exist the bot will try to
            create it.</p>
          <p>If no configuration file is found, the bot will ask of questions
            to help the user make a configuration file.</p>
          <p>By default the bot will use <b>~/.drastikbot</b> as it's
            configuration directory, but this can be changed using the option:
            <br><b>-c [directory]</b></p>
          <p>You can find a default configuration file - named config.json -
            in the <b>examples</b> directory of the bot's repository</p><br>
          <p>You can open the configuration file with your favorite text editor
            and edit it as explained below in order to do any further
            configuration.</p>
          <p>Make sure to not miss anything or make any syntactical mistakes as the bot will
            exit with an error message. (or violently fail)</p>
          <b>Sample configuration file</b>
          <div class="code"><pre><code>
 {
    "irc": {
        "modules": {
            "load": [
                "url", "sed", "search", "help"
            ],
            "global_prefix": ".",
            "channel_prefix": {},
            "blacklist": {
                "sed": []
            },
            "whitelist": {
                "sed": []
            }
        },
        "channels": {
            "#bots": ""
        },
        "owners": [
            "drastik"
        ],
        "connection": {
            "network": "chat.freenode.net",
            "username": "drastik",
            "port": 6697,
            "auth_password": "",
            "realname": "drastikbot2.1",
            "ssl": true,
            "nickname": "drastikbot",
            "authentication": "sasl",
            "net_password": ""
        },
        "user_acl": [
            "* bot1!*@* 0 *"
        ]
    },
    "sys": {
        "log_level": "debug"
    }
}
          </code></pre></div>
          <table>
            <tr>
              <td></td>
              <td><b>{"irc": {"modules": {...}}}</b></td>
            </tr>
            <tr>
              <td class="td_var">"load": [ ]</td>
              <td>List the filenames (without the .py extension) of all
                the modules you want the bot to load at startup. These modules
                should be in the directory:
                <b>/configuration_directory/modules</b>
              </td>
            </tr>
            <tr>
              <td class="td_var">"global_prefix": "."</td>
              <td>The default prefix used for commands. This is the character
                used before a command name. It can be anything, but ideally a
                single character should be used.</td>
            </tr>
            <tr>
              <td class="td_var">"channel_prefix": {}</td>
              <td><b>{"#channel": "cmd_prefix"}</b><br>
                Set the prefix used for commands in a specific channel
              </td>
            </tr>
            <tr>
              <td class="td_var">"blacklist": {}</td>
              <td><b>{"module": ["#channel"]}</b><br>
                The modules listed here will not be used by the bot in any of
                the channels listed. You cannot have both a blacklist and a
                whitelist for the same module.
              </td>
            </tr>
            <tr>
              <td class="td_var">"whitelist": {}</td>
              <td><b>{"module": ["#channel"]}</b><br>
                The modules listed here will only be use by the bot in the
                channels listed. You cannot have both a blacklist and a
                whitelist for the same module.</td>
            </tr>
            <tr>
              <td></td>
              <td><b>{"irc": {"connection": {...}}}</b></td>
            </tr>
            <tr>
              <td class="td_var">"network": ""</td>
              <td>The hostname or the IP of the IRC network you want to connect
                to.</td>
            </tr>
            <tr>
              <td class="td_var">"username": ""</td>
              <td>The username of the bot.</td>
            </tr>
            <tr>
              <td class="td_var">"port": 6697</td>
              <td>The server port to use.</td>
            </tr>
            <tr>
              <td class="td_var">"auth_password": ""</td>
              <td>The password to use for authentication. This is used to
                Identify with NickServ or SASL</td>
            </tr>
            <tr>
              <td class="td_var">"realname": "drastikbot2.1"</td>
              <td>The bot's realname.</td>
            </tr>
            <tr>
              <td class="td_var">"ssl": true</td>
              <td>Whether to use SSL for connecting or not. Can either be: true
                or false.</td>
            </tr>
            <tr>
              <td class="td_var">"nickname": "drastikbot"</td>
              <td>The bot's nickname.</td>
            </tr>
            <tr>
              <td class="td_var">"authentication": "sasl"</td>
              <td>The method used to authenticate the bot. Can be either
                <b>sasl</b> or <b>nickserv</b>. Use "" (an empty string) if no
                authentication is needed.</td>
            </tr>
            <tr>
              <td class="td_var">"net_password": ""</td>
              <td>The password to use if the server is password protected.</td>
            </tr>
          </table>
          <br>
          <table>
            <tr>
              <td></td>
              <td><b>{"irc": {...}}</b></td>
            </tr>
            <tr>
              <td class="td_var">"channels": { }</td>
              <td>Set the channels (and their passwords) the bot should join.
                If there is no password set it as ""</td>
            <tr>
              <td class="td_var">"owners": [ ]</td>
              <td>The nicknames of the bot's owners. Used by modules like
                admin.py to allow these users to perform bot related
                configuration over IRC.
                <b>These nicknames must be registered.</b></tr>
            <tr>
              <td class="td_var">"user_acl": [ ]</td>
              <td>Rules used by the bot block certain users from using it.
                Use <b>.admin_help user_acl_add</b> over IRC for details on how
                it works.</td>
            </tr>
            <tr>
              <td></td>
              <td><b>"sys": {...}</b></td>
            </tr>
            <tr>
              <td class="td_var">"log_level": "debug"</td>
              <td>Set the log level the bot should use.
                Available levels are: "debug", "info"</td>
            </tr>
          </table>

          <p>Many of these settings can be set while the bot is running
            using the administration module <b>admin.py</b><br>
            Send the command <b>.admin_help</b> to the bot to find out how to
            use it.
          </p>
        </li>

        <li id="install_modules">
          <h3>Installing Modules</h3>
          <p>Drastikbot on it's own provides no functionality. To do anything useful with it you need to install and enable modules.</p>
          <h4>Installing Modules<hr></h4>
          <p>NOTE: As described in the "Requirements" section some modules require additional
            dependencies to work. Drastikbot will show an error message (and continue operating,
            since modules are dynamic) if a module fails to load because of unmet dependencies or
            other problems. You can find instructions on how to install those dependencies in
            the module's source file.</p>
          <p>Modules are loaded from the "modules" directory under the bot's configuration directory you set up earlier.</p>
          <p>Create the directory:</p>
          <div class="code"><pre><code>
 $ mkdir ~/.drastikbot/modules
          </code></pre></div>
          <p>Download and add any modules you want to use in that directory. Next, edit
            the configuration file (config.json) to set which modules should be loaded.
            (See: <a href="#configuration">Configuration</a>)
        </li>


        <li id="run">
          <h3>Running drastikbot</h3>
          <p>At this point you should be ready to run and use drastikbot. Before you start the
            bot, however, please read the notes in this section.</p> 
          <p>Drastikbot provides no daemonizing mechanism (a.k.a. it does not run in the
            background). This means that you should use a terminal multiplexer like
            <a href="https://github.com/tmux/tmux/wiki">tmux</a> or
            <a href="https://gnu.org/software/screen">screen</a> and then detach from it's
            session or use the <a href="https://wikipedia.org/wiki/Nohup">nohup</a> program to
            run it in the background and survive logouts.</p>

          <h4 style="text-align:left;">Run using nohup</h4>
          <p>To run drastikbot using nohup execute the following command:</p>
          <div class="code"><pre><code>
 $ nohup drastikbot &
          </code></pre></div>

          <h4 style="text-align: left;">Run using tmux</h4>
          <p>To run drastikbot using tmux execute the following commands after installing tmux
            in your computer:</p>
          <div class="code"><pre><code>
 $ tmux new -s drastikbot_freenode  #drastikbot_freenode can be any name you want

     # Run the bot.
     # Then press "Ctrl-b d" to detach

 $ tmux a  #running this will reattach to the session you previously started

     # If you have multiple sessions pressing "Ctrl-b s" will bring up a list with
     # all the available sessions
          </code></pre></div>

          <h4 style="text-align:left;">Run using screen</h4>
          <p>To run drastikbot using screen execute the following commands after installing
            screen in your computer:</p>
          <div class="code"><pre><code>
 $ screen -S drastikbot_freenode  #drastikbot_freenode can be any name you want
 
     # Run the bot.
     # Then press "Ctrl-A D" to detach

 $ screen -x -r drastikbot_freenode  #running this will reattach to the
                                     #session you previously started

 $ screen -xr  #reattach using this if you only have a single session running
          </code></pre></div>

          <hr>
          <h3>Running multiple instances of drastikbot</h3>
          <p>For easier development and management drastikbot connects to a single IRC network. If you want to use drastikbot in more than one networks you will have to create two seperate configuration directories (preferably under ~/.drastikbot) with different configuation files and use the <b>-c</b> option to tell drastikbot to use a non-default configuration directory.</p>
          <div class="code"><pre><code>
 $ drastikbot -c ~/.drastikbot/freenode
          </code></pre></div>
        </li>
      </ul>
    </div>
  </body>
</html> 
